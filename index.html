<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>加速度センサー検知</title>
</head>
<body>
  <h1>加速度センサー検知</h1>
  <p>スマホを動かして加速度が一定の閾値以下になると音が鳴ります。</p>

  <!-- 加速度を表示するエリア -->
  <div>
    <p>X軸加速度: <span id="accelerationX">0</span></p>
    <p>Y軸加速度: <span id="accelerationY">0</span></p>
    <p>Z軸加速度: <span id="accelerationZ">0</span></p>
    <p>総合加速度: <span id="totalAcceleration">0</span></p>
  </div>

  <script>
    // 閾値を設定
    const threshold = 5; // 任意の数値に調整可能
    let audio = new Audio('alert-sound.mp3'); // 音声ファイルのパス

    // DOM要素の取得
    const accelerationX = document.getElementById('accelerationX');
    const accelerationY = document.getElementById('accelerationY');
    const accelerationZ = document.getElementById('accelerationZ');
    const totalAcceleration = document.getElementById('totalAcceleration');

    // デバイスモーションイベントのリスナー
    window.addEventListener('devicemotion', (event) => {
      const acceleration = event.acceleration;
      if (acceleration) {
        // x, y, z 軸の加速度を取得
        const x = acceleration.x || 0;
        const y = acceleration.y || 0;
        const z = acceleration.z || 0;

        // 総合加速度を計算
        const totalAccel = Math.sqrt(x ** 2 + y ** 2 + z ** 2);

        // HTMLの要素に加速度を表示
        accelerationX.textContent = x.toFixed(2);
        accelerationY.textContent = y.toFixed(2);
        accelerationZ.textContent = z.toFixed(2);
        totalAcceleration.textContent = totalAccel.toFixed(2);

        // 加速度が閾値を下回った場合に音を鳴らす
        if (totalAccel < threshold) {
          audio.play();
        }
      }
    });
  </script>
</body>
</html>
